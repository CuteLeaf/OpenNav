{% extends "base.html" %} {% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-3">
      <div class="admin-sidebar mb-4">
        <h5 class="mb-3">管理菜单</h5>
        <a href="{{ url_for('admin.index') }}" class="admin-sidebar-item">
          <i class="bi bi-speedometer2"></i> 仪表盘
        </a>
        <a href="{{ url_for('admin.categories') }}" class="admin-sidebar-item">
          <i class="bi bi-folder"></i> 分类管理
        </a>
        <a href="{{ url_for('admin.websites') }}" class="admin-sidebar-item">
          <i class="bi bi-globe"></i> 网站管理
        </a>
        <a href="{{ url_for('admin.invitations') }}" class="admin-sidebar-item">
          <i class="bi bi-envelope"></i> 邀请码
        </a>
        <a
          href="{{ url_for('admin.users') }}"
          class="admin-sidebar-item active"
        >
          <i class="bi bi-people"></i> 用户管理
        </a>
        <hr />
        <a href="{{ url_for('main.index') }}" class="admin-sidebar-item">
          <i class="bi bi-arrow-left"></i> 返回前台
        </a>
      </div>
    </div>
    <div class="col-md-9">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="bi bi-people"></i> 用户管理</h2>
      </div>

      <div class="card">
        <div class="card-body">
          {% if users %}
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>#</th>
                  <th>用户名</th>
                  <th>邮箱</th>
                  <th>角色</th>
                  <th>注册时间</th>
                  <th>状态</th>
                </tr>
              </thead>
              <tbody>
                {% for user in users %}
                <tr>
                  <td>{{ user.id }}</td>
                  <td>
                    <div class="d-flex align-items-center">
                      <div
                        class="me-2"
                        style="width: 32px; height: 32px; border-radius: 50%; background-color: {% if user.is_admin %}#6a11cb{% else %}#3498db{% endif %}; color: white; text-align: center; line-height: 32px; font-weight: bold;"
                      >
                        {{ user.username[0] | upper }}
                      </div>
                      {{ user.username }}
                    </div>
                  </td>
                  <td>{{ user.email }}</td>
                  <td>
                    {% if user.is_admin %}
                    <span class="badge bg-danger">管理员</span>
                    {% else %}
                    <span class="badge bg-info">普通用户</span>
                    {% endif %}
                  </td>
                  <td>{{ user.created_at.strftime('%Y-%m-%d') }}</td>
                  <td>
                    {% if user == current_user %}
                    <span class="badge bg-success">当前用户</span>
                    {% else %}
                    <span class="badge bg-light text-dark">在线</span>
                    {% endif %}
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          {% else %}
          <div class="text-center py-5">
            <i class="bi bi-emoji-frown fs-1 text-muted"></i>
            <p class="mt-3 text-muted">暂无用户数据</p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
